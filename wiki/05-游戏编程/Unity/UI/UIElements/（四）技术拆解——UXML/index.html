<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    
    <title>（四）技术拆解——UXML | Back Number</title>
    
    
        <meta name="keywords" content="UIElements">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="一、UXML基本概念 UXML类似于HTML和XAML、XML的结合版，它用于定义UI的逻辑结构。UXML语法上和前三者非常类似。 二、UXML文件的结构 12345678910111213141516171819&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;&lt;UXML    xmlns:xsi&#x3D;&amp;quo">
<meta property="og:type" content="article">
<meta property="og:title" content="（四）技术拆解——UXML">
<meta property="og:url" content="https://peiyuzou.github.io/wiki/05-%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B/Unity/UI/UIElements/%EF%BC%88%E5%9B%9B%EF%BC%89%E6%8A%80%E6%9C%AF%E6%8B%86%E8%A7%A3%E2%80%94%E2%80%94UXML/index.html">
<meta property="og:site_name" content="Back Number">
<meta property="og:description" content="一、UXML基本概念 UXML类似于HTML和XAML、XML的结合版，它用于定义UI的逻辑结构。UXML语法上和前三者非常类似。 二、UXML文件的结构 12345678910111213141516171819&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;&lt;UXML    xmlns:xsi&#x3D;&amp;quo">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-02-04T20:15:13.000Z">
<meta property="article:modified_time" content="2024-12-09T03:20:47.706Z">
<meta property="article:author" content="Z.P.Y">
<meta property="article:tag" content="UIElements">
<meta name="twitter:card" content="summary">
    

    

    
        <link rel="icon" href="/favicon.ico">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
<script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="Back Number" type="application/atom+xml">
</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Back Number</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title"><span>标签</span></h3>
        <div class="widget">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CS-101/" rel="tag">CS-101</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Compression/" rel="tag">Compression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EditorExtend/" rel="tag">EditorExtend</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Issues/" rel="tag">Issues</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/" rel="tag">Lua</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIElements/" rel="tag">UIElements</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/" rel="tag">Unity</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B/" rel="tag">Unity功能实例</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" rel="tag">数据结构和算法</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%98%93%E6%B7%B7%E6%B7%86%E7%82%B9/" rel="tag">易混淆点</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">游戏编程设计模式</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-05-游戏编程/Unity/UI/UIElements/（四）技术拆解——UXML" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/UIElements/" rel="tag">UIElements</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/05-%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B/Unity/UI/UIElements/%EF%BC%88%E5%9B%9B%EF%BC%89%E6%8A%80%E6%9C%AF%E6%8B%86%E8%A7%A3%E2%80%94%E2%80%94UXML/">
            <time datetime="2023-02-04T20:15:13.000Z" itemprop="datePublished">2023-02-05</time>
        </a>
    </div>


                        <!-- 
                            <i class="fa fa-bar-chart"></i>
                            <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span>
                         -->
                        
                            <div class="article-meta-button">
                                <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/PeiyuZou/peiyuZou.github.io/raw/master/source/_posts/05-游戏编程/Unity/UI/UIElements/（四）技术拆解——UXML.md"> Source </a>
                            </div>
                            <!-- <div class="article-meta-button">
                                <a target="_blank" rel="noopener" href='https://github.com/PeiyuZou/peiyuZou.github.io/edit/master/source/_posts/05-游戏编程/Unity/UI/UIElements/（四）技术拆解——UXML.md'> Edit </a>
                            </div>
                            <div class="article-meta-button">
                                <a target="_blank" rel="noopener" href='https://github.com/PeiyuZou/peiyuZou.github.io/commits/master/source/_posts/05-游戏编程/Unity/UI/UIElements/（四）技术拆解——UXML.md'> History </a>
                            </div> -->
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            （四）技术拆解——UXML
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h1 id="一uxml基本概念">一、UXML基本概念</h1>
<p>UXML类似于HTML和XAML、XML的结合版，它用于定义UI的逻辑结构。UXML语法上和前三者非常类似。</p>
<h1 id="二uxml文件的结构">二、UXML文件的结构</h1>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UXML</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">&quot;UnityEngine.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:editor</span>=<span class="string">&quot;UnityEditor.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../UIElementsSchema/UIElements.xsd&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;UnityEngine.UIElements ../UIElementsSchema/UnityEngine.UIElements.xsd&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Label</span> <span class="attr">text</span>=<span class="string">&quot;Select something to remove from your suitcase:&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Box</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">name</span>=<span class="string">&quot;boots&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Boots&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">name</span>=<span class="string">&quot;helmet&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Helmet&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">name</span>=<span class="string">&quot;cloak&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Cloak of invisibility&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Box</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Box</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">name</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">text</span>=<span class="string">&quot;Cancel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">name</span>=<span class="string">&quot;ok&quot;</span> <span class="attr">text</span>=<span class="string">&quot;OK&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Box</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">UXML</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="xml声明">1. XML声明</h2>
<p>第1行，指定文档使用的版本和编码</p>
<h2 id="根标签">2. 根标签<umxl></umxl></h2>
<p>第2-8行以及19行，声明该文档引用的命名空间和架构文件：</p>
<h3 id="xmlns属性">2.1 xmlns属性</h3>
<p>全称XML NameSpace，用于引入命名空间并进行别名，比如第5行：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:editor=&quot;UnityEditor.UIElements&quot;</span><br></pre></td></tr></table></figure>
<p>这一行引入”UnityEditor.UIElements”命名空间并别名为editor，这样声明之后，整个文件中，都可以用editor代替并使用”UnityEditor.UIElements”命名空间</p>
<p>再看第4行：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns=&quot;UnityEngine.UIElements&quot;</span><br></pre></td></tr></table></figure>
<p>这样不带别名进行引入，则是声明默认命名空间，也就是可以不用带前缀直接使用该命名空间中定义的标签。如果上面文件中去掉第4行，那么所有标签都应该加上”UnityEngine.UIElements”命名空间作为前缀，比如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">UnityEngine.UIElements:UXML</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UnityEngine.UIElements:Label</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UnityEngine.UIElements:Box</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UnityEngine.UIElements:Toggle</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UnityEngine.UIElements:Button</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="xsd文件">2.2 xsd文件</h3>
<p>全称XML Schema
Definition，用于预先定义XML文档使用的架构，也就是标签和规则的一个集合。</p>
<p>下面是定义和使用xsd的部分（对应上文的第3、6、7行）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line"></span><br><span class="line">xsi:noNamespaceSchemaLocation=&quot;../UIElementsSchema/UIElements.xsd&quot;</span><br><span class="line">xsi:schemaLocation=&quot;UnityEngine.UIElements ../UIElementsSchema/UnityEngine.UIElements.xsd&quot;</span><br></pre></td></tr></table></figure>
<p>xmlns:xsi引入了XML公共架构的命名空间，并别名为xsi，这几乎是所有XML规范的共识写法。
其中noNamespaceSchemaLocation属性指定了没有任何命名空间的情况下，默认使用的架构文件。schemaLocation则是显示声明使用的架构文件</p>
<h2 id="正文">3. 正文</h2>
<p>上文第9-18行内容，这块位置就按照XML规范编写文档内容即可，在UXML中，这里用于编写整个视觉树的结构代码</p>
<h1 id="三uxml文件的基本使用">三、UXML文件的基本使用</h1>
<h2 id="标签基本结构">1. 标签基本结构</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">namspace:tag</span> <span class="attr">trait1</span>=<span class="string">&quot;xx&quot;</span> <span class="attr">trait2</span>=<span class="string">&quot;xx&quot;</span> <span class="attr">...</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="从c加载uxml">2. 从C#加载UXML</h2>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Load UXML</span></span><br><span class="line"><span class="keyword">var</span> visualTree = AssetDatabase.LoadAssetAtPath&lt;VisualTreeAsset&gt;(<span class="string">&quot;Assets/Editor/Tutorials/01VisualTree/VisualTreeWindow.uxml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// First Way Link to Visula Tree</span></span><br><span class="line">visualTree.CloneTree(root);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Second Way Link to Visula Tree</span></span><br><span class="line">VisualElement labelFromUXML = visualTree.CloneTree();</span><br><span class="line">root.Add(labelFromUXML);</span><br></pre></td></tr></table></figure>
<h2 id="向uxml添加样式">3. 向UXML添加样式</h2>
<h3 id="引入uss文件">3.1 引入uss文件</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">engine:VisualElement</span> <span class="attr">class</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Style</span> <span class="attr">src</span>=<span class="string">&quot;styles.uss&quot;</span> /&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">engine:VisualElement</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># root &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="内联声明style">3.2 内联声明style</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">engine:VisualElement</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: red;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="引用其他uxml文件">4. 引用其他UXML文件</h2>
<p>比如我们首先有一个可供复用的UXML文件如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">engine:VisualElement</span> <span class="attr">class</span>=<span class="string">&quot;portrait&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">engine:Image</span> <span class="attr">name</span>=<span class="string">&quot;portaitImage&quot;</span> <span class="attr">style</span>=<span class="string">&quot;--unity-image: url(\&quot;</span><span class="attr">a.png</span>\&quot;)&quot;/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">engine:Label</span> <span class="attr">name</span>=<span class="string">&quot;nameLabel&quot;</span> <span class="attr">text</span>=<span class="string">&quot;Name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">engine:Label</span> <span class="attr">name</span>=<span class="string">&quot;levelLabel&quot;</span> <span class="attr">text</span>=<span class="string">&quot;42&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">engine:VisualElement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以将 Portrait 组件嵌入到其他 UXML 模板中，如下所示：
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">engine:Template</span> <span class="attr">src</span>=<span class="string">&quot;/Assets/Portrait.uxml&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Portrait&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">engine:VisualElement</span> <span class="attr">name</span>=<span class="string">&quot;players&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">engine:Instance</span> <span class="attr">template</span>=<span class="string">&quot;Portrait&quot;</span> <span class="attr">name</span>=<span class="string">&quot;player1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">engine:Instance</span> <span class="attr">template</span>=<span class="string">&quot;Portrait&quot;</span> <span class="attr">name</span>=<span class="string">&quot;player2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">engine:VisualElement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="src和path">5. src和path</h2>
<p>在上文中，不管是引入uss文件的&lt;Style&gt;标签，还是引入其他UXML模板的&lt;Template&gt;标签，他们都可以通过属性src或者path去标注文件路径，但是两者有区别需要注意：</p>
<h3 id="src">5.1 src</h3>
<p>src允许使用相对路径，且在文件丢失时会提供错误信息。src声明的路径需要包含文件扩展名</p>
<h3 id="path">5.2 path</h3>
<p>path不允许使用相对路径，在导入时不提供错误报告；但是它允许使用Unity资源机制，接受位于Resources文件夹或Editor
Default Resources文件夹中的文件：</p>
<ul>
<li>如果文件位于Resources文件夹中，不得包含文件扩展名。例如，为位于
Assets/Resources/template.uxml 的文件编写 path=“template”</li>
<li>如果文件位于Editor Default
Resources文件夹中，必须包含文件扩展名。例如，为位于 Assets/Editor
Default Resources/template.uxml 的文件编写 path=“template.uxml”</li>
</ul>
<h2 id="c查询uxml中声明的viusalelement">6.
C#查询UXML中声明的ViusalElement</h2>
<p>使用以下语句进行查询：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Button button = root.Query&lt;Button&gt;(<span class="string">&quot;btn&quot;</span>);</span><br><span class="line"><span class="comment">//或者直接简写Q</span></span><br><span class="line">VisualElement ve = root.Q&lt;VisualElement&gt;(<span class="string">&quot;foo&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>查询的前提是，UXML声明的结构已经连接到视觉树中</p>
<h1 id="四uxml的扩展">四、UXML的扩展</h1>
<h2 id="添加一个自定义的标签">1. 添加一个自定义的标签</h2>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine.UIElements;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CustomElement</span> : <span class="title">VisualElement</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> m_status;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Status &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//必须包含显示构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomElement</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_status = <span class="built_in">string</span>.Empty;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//为了读取UXML时，每一个标签实例化一个新对象，需要在类内部声明这个泛型工厂类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">class</span> <span class="title">UxmlFactory</span> : <span class="title">UxmlFactory</span>&lt;<span class="title">CustomElement</span>&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="为标签定义新的属性">2. 为标签定义新的属性</h2>
<p>假设我们要拓展Label标签，并且定义一个status属性，让Label显示的文本和status保持同步，如下文的UXML：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:engine</span>=<span class="string">&quot;UnityEngine.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:editor</span>=<span class="string">&quot;UnityEditor.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../../../../UIElementsSchema/UIElements.xsd&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CustomElement</span> <span class="attr">name</span>=<span class="string">&quot;CustomArea&quot;</span> <span class="attr">status</span>=<span class="string">&quot;扩展成功&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是C#拓展的脚本类：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UIElements;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CustomElement</span> : <span class="title">Label</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> m_status;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Status &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//必须包含显示构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomElement</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_status = <span class="built_in">string</span>.Empty;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//为了读取UXML时，每一个标签实例化一个新对象，需要在类内部声明这个泛型工厂类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">class</span> <span class="title">UxmlFactory</span> : <span class="title">UxmlFactory</span>&lt;<span class="title">CustomElement</span>, <span class="title">UxmlTraits</span>&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明本标签使用的属性，声明在这里也是为了方便访问该标签类的私有成员</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">class</span> <span class="title">UxmlTraits</span> : <span class="title">VisualElement.UxmlTraits</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//声明属性在UXML文档中的名字</span></span><br><span class="line">        UxmlStringAttributeDescription m_Status = <span class="keyword">new</span> UxmlStringAttributeDescription &#123; name = <span class="string">&quot;status&quot;</span> &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//返回一个空的IEnumerable，表示CustomElement这个标签的元素没有子元素</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable&lt;UxmlChildElementDescription&gt; uxmlChildElementsDescription</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">yield</span> <span class="keyword">break</span>; &#125;</span><br><span class="line">            <span class="comment">//如果要让该标签的元素接受任意类型的元素，可以这么写：</span></span><br><span class="line">            <span class="comment">// get</span></span><br><span class="line">            <span class="comment">// &#123;</span></span><br><span class="line">            <span class="comment">//     yield return new UxmlChildElementDescription(typeof(VisualElement));</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Init()从XML解析器读取属性包中状态属性的值</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Init</span>(<span class="params">VisualElement ve, IUxmlAttributes bag, CreationContext cc</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">base</span>.Init(ve, bag, cc);</span><br><span class="line">            <span class="comment">//使标签对象的值从UXML文件内容中读取</span></span><br><span class="line">            <span class="built_in">string</span> <span class="keyword">value</span> = m_Status.GetValueFromBag(bag, cc);</span><br><span class="line">            <span class="keyword">var</span> ce = (CustomElement) ve;</span><br><span class="line">            ce.Status = <span class="keyword">value</span>;</span><br><span class="line">            ce.text = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="自定义标签名称">3. 自定义标签名称</h2>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">class</span> <span class="title">UxmlFactory</span> : <span class="title">UxmlFactory</span>&lt;<span class="title">CustomElement</span>, <span class="title">UxmlTraits</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//通过覆写工厂类的该属性，可以使用自定义的标签名称</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> uxmlQualifiedName</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="string">&quot;ZPY.TAG&quot;</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">engine:UXML</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:engine</span>=<span class="string">&quot;UnityEngine.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:editor</span>=<span class="string">&quot;UnityEditor.UIElements&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../../../../UIElementsSchema/UIElements.xsd&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ZPY.TAG</span> <span class="attr">name</span>=<span class="string">&quot;CustomArea&quot;</span> <span class="attr">status</span>=<span class="string">&quot;扩展成功&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">engine:UXML</span>&gt;</span></span><br></pre></td></tr></table></figure>

            </div>
        
        <!-- <footer class="article-footer">
        </footer> -->
    </div>
</article>

<!-- zpy dont need foot nav -->
<!-- 
    
<nav id="article-nav">
    
        <a href="/wiki/05-%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B/Unity/UI/UIElements/%EF%BC%88%E4%BA%94%EF%BC%89%E6%8A%80%E6%9C%AF%E6%8B%86%E8%A7%A3%E2%80%94%E2%80%94USS/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    （五）技术拆解——USS
                
            </div>
        </a>
    
    
        <a href="/wiki/05-%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B/Unity/UI/UIElements/%EF%BC%88%E4%B8%89%EF%BC%89%E6%8A%80%E6%9C%AF%E6%8B%86%E8%A7%A3%E2%80%94%E2%80%94%E5%B8%83%E5%B1%80%E5%BC%95%E6%93%8E/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">（三）技术拆解——布局引擎</div>
        </a>
    
</nav>


 -->


    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            Z.P.Y &copy; 2025 
            <a rel="external nofollow noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme - <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a>
            <!-- 
                <br>
                <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span></span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_pv"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span></span>
             -->
        </div>
    </div>
</footer>

        

    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>